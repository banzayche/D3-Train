<html>
<head>
	<meta charset="UTF-8">
	<title>D3 SVG</title>
	<link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css">

	<script type="text/javascript" src="bower_components/d3/d3.js"></script>
	<script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
	<script type="text/javascript" src="bower_components/underscore/underscore-min.js"></script>

	<script type="text/javascript" src="js/improvement_train.js"></script>
	<style type="text/css">
		body{
			margin: 0;
			padding: 0;
			background-color: #2F2F2F; 
			background-image: url('./brain.made.page.png');
			background-repeat: no-repeat;
			background-position: center;
			height: 3747px;
			padding: 0;
			margin: 0;
		}
		svg{
			display: block;
			margin: 0px auto;
			/*position: fixed;*/
		}

		#anchor1{
			position: absolute;
			top: 3508px;
		}
		#anchor2{
			position: absolute;
			top: 3008px;
		}
		#anchor3{
			position: absolute;
			top: 2348px;
		}
		#anchor4{
			position: absolute;
			top: 1448px;
		}
		#anchor5{
			position: absolute;
			top: 665px;
		}
		#anchor6{
			position: absolute;
			top: 0;
		}

		g{
			cursor: pointer;
		}
	
		.tooltip {
		    pointer-events:none; /*let mouse events pass through*/
		    opacity:0;
		    transition: opacity 0.3s;
		    color: white;
		    padding: 5px;
			box-sizing: border-box;
		}
		div.tooltip:after{
			content: '';
			position: absolute;
			top: 100%;
			right: -3px;
			border-top: 10px solid white;
			border-left: 10px solid transparent;
			border-bottom: 10px solid transparent;
			border-right: 10px solid white; 
			width: 0;
			height: 0;
			box-sizing: border-box;
		}
		div.tooltip {
		    background: steelblue;
		    border: 3px solid white;
		    border-top-left-radius: 15px;
		    border-top-right-radius: 15px;
		    border-bottom-left-radius: 15px;
		    position: absolute;
		    max-width: 8em;
		    text-align:center;
		}
		div.tooltip .orange{
			color: orange;
			font-weight: 600;
		}
	</style>
</head>
<body>
	<div id="anchor1"></div>	
	<div id="anchor2"></div>
	<div id="anchor3"></div>
	<div id="anchor4"></div>
	<div id="anchor5"></div>
	<div id="anchor6"></div>

	<script type="text/javascript">
		var tooltipsData = {
			1: {
				dataAnchorName: 'CONTACT US'
			},
			2: {
				dataAnchorName: 'RESOURCES'
			},
			3: {
				dataAnchorName: 'NY LOTTERY'
			},
			4: {
				dataAnchorName: 'OUR WORKFLOW'
			},
			5: {
				dataAnchorName: 'WHO WE ARE'
			},
			6: {
				dataAnchorName: 'MAIN'
			}
		};


		$(document).ready(function(){
			trainMovement().then(function(data){
				// code with tips will be here
				data.forEach(function(elem, index){
					elem.element
						.attr('data-anchor-name', tooltipsData[index+1].dataAnchorName);
				});

				var tooltip = $(".tooltip");
				var HTMLmouseTip = $("div.tooltip.mouse");

				$("g")
	    			.on("mousemove", function (e) {	    					
	    					var anchorName = $(this).attr('data-anchor-name');
	    					HTMLmouseTip.find( ".orange" ).html(anchorName);

							tooltip.css("opacity", "1");

					    	HTMLmouseTip
					            .css("left", Math.max(0, e.pageX - HTMLmouseTip.width() - 10 - 5) + "px")
					            .css("top", (e.pageY - HTMLmouseTip.height() - 10 - 20) + "px");
					})
					.on("mouseout", function (e) {
						return tooltip.css("opacity", "0");
					});

				// Anchors
				var scrollToAnchor = function(e){
					var link = $(this).attr('data-index');
					link = '#anchor'+(+link+1);
					var top = $(link).offset().top;

					$('body,html').animate({scrollTop: top}, 5000);
				};

				var throttled = _.throttle(scrollToAnchor, 5000);

				$('.secondary, .main').on('click', throttled);
			});	
		});
	</script>

	<div class="mouse tooltip" >Click to go to<br><span class="orange"></span></div>
</body>
</html>